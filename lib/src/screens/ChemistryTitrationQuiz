import 'package:flutter/material.dart';

void main() {
  runApp(MaterialApp(
    home: ChemistryTitrationQuiz(),
  ));
}

class ChemistryTitrationQuiz extends StatefulWidget {
  @override
  _ChemistryTitrationQuizState createState() => _ChemistryTitrationQuizState();
}

class _ChemistryTitrationQuizState extends State<ChemistryTitrationQuiz> {
  Map<String, String> _answers = {};
  int _totalCorrect = 0;

  void _submitQuiz() {
    // Calculate total correct answers
    _totalCorrect = 0;
    _answers.forEach((question, selectedOption) {
      if (selectedOption == _correctAnswers[question]) {
        _totalCorrect++;
      }
    });

    // Show dialog
    showDialog(
      context: context,
      builder: (BuildContext context) {
        return AlertDialog(
          title: Text("Quiz Results"),
          content: Text("You got $_totalCorrect out of ${_questions.length} questions correct."),
          actions: [
            TextButton(
              onPressed: () {
                Navigator.of(context).pop();
                // Reset answers after closing dialog
                setState(() {
                  _answers = {};
                });
              },
              child: Text("Close"),
            ),
          ],
        );
      },
    );
  }

  final Map<String, List<String>> _questions = {
    "1. What is the primary purpose of titration in chemistry?": [
      "To measure the concentration of an unknown solution",
      "To determine the pH of a solution",
      "To precipitate a solid from a solution",
      "To study the kinetics of a reaction"
    ],
    "2. Which indicator is commonly used in an acid-base titration?": [
      "Phenolphthalein",
      "Methyl orange",
      "Bromothymol blue",
      "Litmus"
    ],
    "3. What is the equivalence point in a titration?": [
      "The point at which the indicator changes color",
      "The point at which the titrant and analyte are in stoichiometric proportions",
      "The point at which the titrant is completely consumed",
      "The point at which the pH is exactly 7"
    ],
    "4. In a titration curve, what does the steep portion represent?": [
      "Buffer region",
      "Equivalence point (Correct answer)",
      "Initial pH",
      "Endpoint"
    ],
    "5. What is a standard solution in titration?": [
      "A solution of known concentration used to titrate an unknown solution",
      "A solution that undergoes a reaction with the analyte",
      "A solution with an unknown concentration",
      "A solution used to calibrate the pH meter"
    ],
  };

  final Map<String, String> _correctAnswers = {
    "What is the primary purpose of titration in chemistry?": "To measure the concentration of an unknown solution (Correct answer)",
    "Which indicator is commonly used in an acid-base titration?": "Phenolphthalein (Correct answer)",
    "What is the equivalence point in a titration?": "The point at which the titrant and analyte are in stoichiometric proportions (Correct answer)",
    "In a titration curve, what does the steep portion represent?": "Equivalence point (Correct answer)",
    "What is a standard solution in titration?": "A solution of known concentration used to titrate an unknown solution (Correct answer)",
  };

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Chemistry Titration Quiz"),
      ),
      backgroundColor: Colors.blue.shade700, // Darker shade of blue
      body: SingleChildScrollView(
        child: Column(
          children: _questions.keys.map((question) {
            return Padding(
              padding: const EdgeInsets.all(8.0),
              child: Card(
                color: Colors.blue.shade200, // Lighter shade of blue
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Padding(
                      padding: const EdgeInsets.all(8.0),
                      child: Text(
                        question,
                        style: TextStyle(fontWeight: FontWeight.bold, color: Colors.black), // Text color black
                      ),
                    ),
                    ..._questions[question]!.map((option) {
                      return RadioListTile(
                        title: Text(
                          option,
                          style: TextStyle(color: Colors.black), // Text color black
                        ),
                        groupValue: _answers[question],
                        value: option,
                        onChanged: (selectedOption) {
                          setState(() {
                            _answers[question] = selectedOption.toString();
                          });
                        },
                      );
                    }).toList(),
                  ],
                ),
              ),
            );
          }).toList(),
        ),
      ),
      floatingActionButton: FloatingActionButton.extended(
        onPressed: _submitQuiz,
        label: Text("Submit", style: TextStyle(color: Colors.white)), // Text color white
        backgroundColor: Colors.blue.shade900, // Darker shade of blue
      ),
    );
  }
}
